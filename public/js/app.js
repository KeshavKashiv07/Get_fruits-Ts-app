var url = "http://localhost:3000/fruits/";
// Note:As per test requirement, Fruits API should be running on port 3000
function getFruits() {
    //Return the promise returned by the fetch() method
    var promiseObj = fetch(url);
    //Successful promise callback function should convert the response body text to json object and return the promise as result.
    var promiseJson = promiseObj.then(function (response) { return response.json(); });
    //Returned successful promise callback should call `transform()` method by passing the json object as argument
    transform(promiseJson);
    
     return promiseObj
}
//Inside transform() function, iterate the json data passed as parameter.
//Then transform each fruit to transformedFruit object that mirrors Fruit type 
function transform(JsonData) {
    //call showFruit() function for each transformedFruit object
    var getData = JsonData.then(function (data) { return data.forEach(function (item) {
        console.log(item.name + "----->>" + item.price + "----->>" + item.unit);
        var transformedFruit = {
            Id: item.id,
            name: item.name,
            image: item.image,
            unit: item.unit,
            price: item.price
        };
        showFruit(transformedFruit);
    }); });
}
//Inside showFruit() function, pass transformedFruit object as parameter
function showFruit(transformedFruit) {
    //display each transformedFruit as card by creating HTML code as string and appending it to the div container
    var div = document.getElementById("container");
    var card = "<div class=\"card text-center m-3 pb-4 col-lg-2\">\n            <img src=\"".concat(transformedFruit.image, "\" height=150 width=150 class=\"m-5 my-3\">\n            <h4>").concat(transformedFruit.name, "</h4>\n            <h5 class=\"text-secondary\" >Price : $").concat(transformedFruit.price, " per lb</h5>              \n            </div>");
    div.innerHTML += card;
}
//compiler error for "module" will be resolved once node_modules folder is generated by giving 'npm install' command in the terminal
// do not delete the code given below, it is written to export the functions to be tested
module.exports = {
    getFruits: getFruits
};
